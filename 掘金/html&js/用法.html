<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ç”¨æ³•</title>
</head>
<body>
    <div class="outer">
        <div class="inner" data-name="jack" data-gender="boy">
            <span>æ–‡å­—æµ‹è¯•</span> 
            <!-- å˜æˆdisplay:none è€Œä¸æ˜¯visible:hidden -->
            <span hidden>hidden</span>
            <p contenteditable class="test1">æˆ‘æ˜¯På…ƒç´ ï¼Œä½†æ˜¯æˆ‘ä¹Ÿå¯ä»¥è¢«ç¼–è¾‘</p>
            <textarea spellcheck="true" cols="30" rows="10"></textarea>
        </div>
    </div>
    <script>
        // å¯ä»¥ç”¨è¿™ç§å¤æ‚çš„æ–¹å¼æ¥å¯»æ‰¾å…ƒç´ 
        let inner = document.querySelector('.outer .inner');
        // closeå‘ä¸ŠæŸ¥æ‰¾
        let outer = inner.closest('.outer');
        // è·å–çš„æ˜¯ä¸ªå¯¹è±¡ é‡Œé¢æ˜¯ {name: 'jack',gender: 'boy'}
        inner.dataset
        let test1 = inner.querySelector('.test1');
        test1.classList.add('test1-title');
        test1.classList.remove('test1-title');
        // æœ‰å°±ç§»é™¤ æ²¡æœ‰å°±æ·»åŠ 
        test1.classList.toggle('test1-title-1');
        // æ›¿æ¢
        test1.classList.replace('test1-title-1','test1-title-2');
        // ç›‘æµ‹æ˜¯å¦åŒ…å«è¯¥ç±»å
        let t_resoult = test1.classList.contains('test1-title-1');
        // æŒ‡å®šå…ƒç´ åœ¨å½“å‰é¡µé¢çš„ç©ºé—´ä¿¡æ¯
        // topæ˜¯è·ç¦»æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»ï¼Œyåˆ™æ˜¯è·ç¦»å¯è§†çª—å£ï¼ˆæµè§ˆå™¨å±å¹•ï¼‰çš„é¡¶éƒ¨è·ç¦»
        // ï¼Œå¦‚æœæµè§ˆå™¨æ»šåŠ¨ï¼Œtopå€¼ä¸å˜ï¼Œyå€¼ä¼šå˜
        let t_rect = test1.getBoundingClientRect();
        // a æ˜¯å¦åŒ…å«bå…ƒç´ 
        let con = inner.contains(test1);
        //è·å–url ?åé¢çš„å‚æ•° åé¢è¿˜å¯ä»¥è·Ÿå±æ€§   .get('id');//è·å– ?åé¢idçš„å€¼
        new URLSearchParams(location.search)
        // åˆ‡æ¢ä¸ºåœ¨çº¿çš„æ—¶å€™ ä¼šè°ƒç”¨æ–¹æ³•
        // è¿˜æœ‰offline å¯ä»¥è§‚å¯Ÿåˆ°æ˜¯å¦ç¦»çº¿
        window.addEventListener("online", ()=> {
            console.log('åœ¨çº¿')
        });
        navigator.getBattery().then(battery => console.log(battery));
        // {
        //     charging, // æ˜¯å¦åœ¨å……ç”µ
        //     chargingTime, // å……æ»¡ç”µæ‰€éœ€æ—¶é—´
        //     dischargingTime, // å½“å‰ç”µé‡å¯ä½¿ç”¨æ—¶é—´
        //     level, å‰©ä½™ç”µé‡

        //     onchargingchange, // ç›‘å¬å……ç”µçŠ¶æ€å˜åŒ–
        //     onchargingtimechange, // ç›‘å¬å……æ»¡ç”µæ‰€éœ€æ—¶é—´å˜åŒ–
        //     ondischargingtimechange, // ç›‘å¬å½“å‰ç”µé‡å¯ä½¿ç”¨æ—¶é—´å˜åŒ–
        //     onlevelchange // ç›‘å¬ç”µé‡å˜åŒ–
        // }
        // éœ‡åŠ¨ä¸€æ¬¡
        navigator.vibrate(100);
        // è¿ç»­éœ‡åŠ¨ï¼Œéœ‡åŠ¨200msã€æš‚åœ100msã€éœ‡åŠ¨300ms
        navigator.vibrate([200, 100, 300]);
        // é¡µé¢æ˜¯å¦å¯è§
        document.addEventListener("visibilitychange", () => {
            console.log(`é¡µé¢å¯è§æ€§ï¼š${document.visibilityState}`);
        });
        window.addEventListener("deviceorientation", event => {
        let {
            alpha,
            beta,
            gamma
        } = event;

        console.log(`alphaï¼š${alpha}`);
        console.log(`betaï¼š${beta}`);
        console.log(`gammaï¼š${gamma}`);
        });
        // å°†å›¾ç‰‡é“¾æ¥å˜æˆdata64 ä½†æ˜¯è·¨åŸŸçš„åªèƒ½é¢„è§ˆ
        // å°è£…ä¸€ä¸‹å¯ä»¥è§£å†³ä¸Šé¢çš„é—®é¢˜
        const downloadImage = (url, name) => {
            // å®ä¾‹åŒ–ç”»å¸ƒ
            let canvas = document.createElement("canvas");
            let context = canvas.getContext("2d");

            // å®ä¾‹åŒ–ä¸€ä¸ªå›¾ç‰‡å¯¹è±¡
            let image = new Image();
            image.crossOrigin = "Anonymous";
            image.src = url;

            // å½“å›¾ç‰‡åŠ è½½å®Œæ¯•
            image.onload = () => {
                // å°†å›¾ç‰‡ç”»åœ¨ç”»å¸ƒä¸Š
                canvas.height = image.height;
                canvas.width = image.width;
                context.drawImage(image, 0, 0);

                // å°†ç”»å¸ƒçš„å†…å®¹è½¬æ¢æˆbase64åœ°å€
                let dataURL = canvas.toDataURL("image/png");

                // åˆ›å»ºaæ ‡ç­¾æ¨¡æ‹Ÿç‚¹å‡»è¿›è¡Œä¸‹è½½
                let a = document.createElement("a");
                a.hidden = true;
                a.href = dataURL;
                a.download = name;

                document.body.appendChild(a);
                a.click();
            }
        }
        // è‡ªå®šä¹‰äº‹ä»¶ï¼Œå°±è·Ÿvueé‡Œé¢çš„onè·Ÿemitä¸€æ ·ï¼›
        // ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶
        window.addEventListener("follow", event => {
            console.log(event.detail); // è¾“å‡º {name: "å‰ç«¯å®‡å®™æƒ…æŠ¥å±€"}
        });
        // æ´¾å‘è‡ªå®šä¹‰äº‹ä»¶
        window.dispatchEvent(new CustomEvent("follow", {
            detail: {
                name: "å‰ç«¯å®‡å®™æƒ…æŠ¥å±€"
            }
        }));
        // // pcç«¯æ¡Œé¢é€šçŸ¥
        // const notice = new Notification("å‰ç«¯å®‡å®™æƒ…æŠ¥å±€", {
        //     body: "è¿™20ä¸ªä¸å¸¸ç”¨çš„Web APIçœŸçš„æœ‰ç”¨å—?ï¼Œåˆ«é—®ï¼Œé—®å°±æ˜¯æœ‰ç”¨ğŸˆ¶",
        //     icon: "æˆ‘çš„æ˜é‡‘å¤´åƒ",
        //     data: {
        //         url: "https://www.baidu.com"
        //     }
        // });

        // // ç‚¹å‡»å›è°ƒ
        // notice.onclick = () => {
        //     window.open(notice.data.url); // å½“ç”¨æˆ·ç‚¹å‡»é€šçŸ¥æ—¶ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ç™¾åº¦ç½‘ç«™
        // }
        // ä¸Šè¿°åŠŸèƒ½è¦å®ç°  é¦–å…ˆè¦æˆæƒ
        // Notification.requestPermission(prem => {
        //     prem == "granted" // åŒæ„
        //     prem == "denied" // æ‹’ç»
        // })
        let permission = Notification.permission;
        console.log(permission,'permission')
        if (permission == "granted") {
            // å·²åŒæ„ï¼Œå¼€å§‹å‘é€é€šçŸ¥
            const notice = new Notification("å‰ç«¯å®‡å®™æƒ…æŠ¥å±€", {
                body: "è¿™20ä¸ªä¸å¸¸ç”¨çš„Web APIçœŸçš„æœ‰ç”¨å—?ï¼Œåˆ«é—®ï¼Œé—®å°±æ˜¯æœ‰ç”¨ğŸˆ¶",
                icon: "æˆ‘çš„æ˜é‡‘å¤´åƒ",
                data: {
                    url: "https://www.baidu.com"
                }
            });

            // ç‚¹å‡»å›è°ƒ
            notice.onclick = () => {
                window.open(notice.data.url); // å½“ç”¨æˆ·ç‚¹å‡»é€šçŸ¥æ—¶ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ç™¾åº¦ç½‘ç«™
            }
        } else if (permission == "denied") {
            // ä¸åŒæ„ï¼Œå‘ä¸äº†å’¯
        } else {
        // å…¶ä»–çŠ¶æ€ï¼Œå¯ä»¥é‡æ–°å‘é€æˆæƒæç¤º
            Notification.requestPermission();
        }


        // æŒ‡å®šæŸä¸ªå…ƒç´ å…¨å±
        /**
         * @method launchFullScreen å¼€å¯å…¨å±
         * @param {Object} elem = document.documentElement ä½œç”¨çš„å…ƒç´ 
         */
        const launchFullScreen = (elem = document.documentElement) => {
            if(elem.requestFullScreen) {
                elem.requestFullScreen();
            } else if(elem.mozRequestFullScreen) {
                elem.mozRequestFullScreen();
            } else if(elem.webkitRequestFullScreen) {
                elem.webkitRequestFullScreen();
            }
        }
        // ç›‘å¬å±å¹•å˜åŒ–
        window.addEventListener("orientationchange", () => {
            document.body.innerHTML += `<p>å±å¹•æ—‹è½¬åçš„è§’åº¦å€¼ï¼š${window.orientation}</p>`;
        }, false);
        // ä¹Ÿå¯ä»¥ç”¨cssæ§åˆ¶æ ·å¼
        // /* ç«–å±æ—¶æ ·å¼ */
        // @media all and (orientation: portrait) {
        //     body::after {
        //         content: "ç«–å±"
        //     }
        // }

        // /* æ¨ªå±æ—¶æ ·å¼ */
        // @media all and (orientation: landscape) {
        //     body::after {
        //         content: "æ¨ªå±"
        //     }
        // }

        // console.log(con,'##')
    </script>
</body>
</html>