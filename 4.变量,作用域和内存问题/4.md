# 变量,作用域和内存问题

## 基本类型和引用类型值

基本类型有 `Undefined,Null,Boolean,Number,String`
**js不允许直接访问内存中的为位置,也就是不能直接输出操作对象的空间,所以应用对象的值是按引用访问的**

>对象是存储在堆里面 ,普通类型是存储在栈中

当对象作为参数传递到函数里,函数内部会创建一个局部变量(arguments对象中的元素),所以两个引用的是同一个对象,在函数内部对对象的属性进行改变的时候,也会改变外部的该对象; 而基本类型的这个内部的局部变量和外部的两个互不两联,函数结束就被销毁了,所以不会有影响.
**注: 如果在函数内部创建了一个对象,那个对象还是会在函数结束完毕后销毁的**

## 检测类型

用typeof来判断基本类型 用instanceof来判断引用类型

1. typeof 可以判断几个简单的  唯一不能判断的是null 会显示为Object
2. instanceof 可以在用于引用类型的时候使用  `xx instanceof Obejct/Array/RegExp`

## 执行环境

>执行环境定义了变量或函数有权访问的其他数据,每个执行环境都有一个与之相关联的变量对象(variable object),环境中定义的所有变量和函数都保存在这个对象中.
>当代码在一个环境中执行时,会创建变量对象的一个作用域链.

### 延长作用域链

1. try-catch 的catch块
2. with 语句

### 没有块级作用域造成

`if(true){ var a = 1 };alert(a)`,在java,c,c++中执行完if语句 a就会被销毁,即打印不出值, 但js会打印出1.***因为js中if语句的变量声明会将变量添加到当前的执行环境中***   所以forin中的var i是公用一个i.

>即用var 的变量会被自动添加到最接近的环境中

## 垃圾收集

1. 标记清除(常用)
2. 引用计数 ,会有循环引用的情况

将值设置为null 可以**解除引用**
